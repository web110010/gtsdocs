<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="NGINX # In order to use NGINX as a reverse proxy for GoToSocial you&rsquo;ll need to have it installed on your server. If you intend for the NGINX instance to also handle TLS, you&rsquo;ll need to provision TLS certificates too.
NGINX is packaged for many distributions. It&rsquo;s very likely you can install it with your distribution&rsquo;s package manager. You can also run NGINX using a container runtime with the official NGINX image that&rsquo;s published to the Docker Hub.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="" />
<meta property="og:description" content="NGINX # In order to use NGINX as a reverse proxy for GoToSocial you&rsquo;ll need to have it installed on your server. If you intend for the NGINX instance to also handle TLS, you&rsquo;ll need to provision TLS certificates too.
NGINX is packaged for many distributions. It&rsquo;s very likely you can install it with your distribution&rsquo;s package manager. You can also run NGINX using a container runtime with the official NGINX image that&rsquo;s published to the Docker Hub." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/docs/getting_started/reverse_proxy/nginx/" /><meta property="article:section" content="docs" />



<title>Nginx |  GoToSocial Documentation </title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.f8de3645fe00591b41524aee174e19edd98a22255a2930a0cdc82a94835ba387.css" integrity="sha256-&#43;N42Rf4AWRtBUkruF04Z7dmKIiVaKTCgzcgqlINbo4c=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.611c5c1febb7934f5bf0513e18b80edbb8ef94a70c6bcfdb5d454501232b51e4.js" integrity="sha256-YRxcH&#43;u3k09b8FE&#43;GLgO27jvlKcMa8/bXUVFASMrUeQ=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
  <link href="/css/swagger-css/swagger-ui.css" rel="stylesheet" type="text/css">
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/favicon.ico" alt="Logo" /><span> GoToSocial Documentation </span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/faq/" class="">FAQ</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0b8a4f04ff43ad74e1f0264bbdf6f4e1" class="toggle"  />
    <label for="section-0b8a4f04ff43ad74e1f0264bbdf6f4e1" class="flex justify-between">
      <a role="button" class="">User Guide</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/user_guide/posts/" class="">Posts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/user_guide/settings/" class="">Settings</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/user_guide/custom_css/" class="">Custom CSS (Advanced)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/user_guide/password_management/" class="">Password Management</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/user_guide/rss/" class="">RSS</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d0d8c0b66b8e3c4a41d9a7a903279018" class="toggle" checked />
    <label for="section-d0d8c0b66b8e3c4a41d9a7a903279018" class="flex justify-between">
      <a role="button" class="">Getting Started</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/deployment_considerations/" class="">Deployment Considerations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/releases/" class="">Releases</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4dd3c8f7579de11397af9a616dd97623" class="toggle"  />
    <label for="section-4dd3c8f7579de11397af9a616dd97623" class="flex justify-between">
      <a href="/docs/getting_started/installation/" class="">Installation</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/installation/metal/" class="">Bare metal</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/installation/container/" class="">Container</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-227ed35e8d3d1d9ae6ada088eaa5826a" class="toggle" checked />
    <label for="section-227ed35e8d3d1d9ae6ada088eaa5826a" class="flex justify-between">
      <a href="/docs/getting_started/reverse_proxy/" class="">Reverse Proxy</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/reverse_proxy/nginx/" class="active">Nginx</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/reverse_proxy/apache-httpd/" class="">Apache Httpd</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/reverse_proxy/caddy/" class="">Caddy 2</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/reverse_proxy/websocket/" class="">Websocket</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/getting_started/user_creation/" class="">User Creation</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-733eb6bf92c2240d3439f44b52d0e508" class="toggle"  />
    <label for="section-733eb6bf92c2240d3439f44b52d0e508" class="flex justify-between">
      <a href="/docs/configuration/" class="">Configuration</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/general/" class="">General</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/database/" class="">Database</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/web/" class="">Web</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/instance/" class="">Instance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/accounts/" class="">Accounts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/media/" class="">Media</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/storage/" class="">Storage</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/statuses/" class="">Statuses</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/tls/" class="">TLS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/oidc/" class="">OpenID Connect (OIDC)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/smtp/" class="">Email Config (smtp)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/syslog/" class="">Syslog</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/advanced/" class="">Advanced</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/configuration/observability/" class="">Observability</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-947fb6d312b5241daf9523c924869228" class="toggle"  />
    <label for="section-947fb6d312b5241daf9523c924869228" class="flex justify-between">
      <a href="/docs/advanced/" class="">Advanced</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/advanced/host-account-domain/" class="">Split-domain deployments</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/advanced/outgoing-proxy/" class="">Outgoing HTTP proxy</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-76875d46ccfca56452024158a33d8109" class="toggle"  />
    <label for="section-76875d46ccfca56452024158a33d8109" class="flex justify-between">
      <a href="/docs/advanced/caching/" class="">Caching</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/advanced/caching/api/" class="">API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/advanced/caching/assets-media/" class="">Assets Media</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/advanced/certificates/" class="">Provisioning TLS certificates</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-010cc1241fb55df50712cba4c805f74e" class="toggle"  />
    <label for="section-010cc1241fb55df50712cba4c805f74e" class="flex justify-between">
      <a href="/docs/advanced/security/" class="">Security</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/advanced/security/sandboxing/" class="">Application sandboxing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/advanced/security/firewall/" class="">Firewall</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/advanced/tracing/" class="">Tracing</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d3501c3f4c7ea3fb09a3bb156b24beda" class="toggle"  />
    <label for="section-d3501c3f4c7ea3fb09a3bb156b24beda" class="flex justify-between">
      <a role="button" class="">Admin</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/admin/settings/" class="">Admin Settings</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/admin/cli/" class="">GtS CLI Tool</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/admin/backup_and_restore/" class="">Backup and Restore</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-901779afe5996ea4448e3bb3d55a2b9f" class="toggle"  />
    <label for="section-901779afe5996ea4448e3bb3d55a2b9f" class="flex justify-between">
      <a href="/docs/federation/" class="">Federation</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/federation/glossary/" class="">Glossary</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/federation/federating_with_gotosocial/" class="">Federating With Gotosocial</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bf7b3283e3790c00c8caaa140299052b" class="toggle"  />
    <label for="section-bf7b3283e3790c00c8caaa140299052b" class="flex justify-between">
      <a role="button" class="">API</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/api/swagger/" class="">Swagger</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/api/ratelimiting/" class="">Request Rate Limiting</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/api/throttling/" class="">Request Throttling</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Nginx</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#configure-gotosocial">Configure GoToSocial</a></li>
    <li><a href="#set-up-nginx">Set up NGINX</a></li>
    <li><a href="#set-up-tls">Set up TLS</a></li>
    <li><a href="#security-hardening">Security hardening</a></li>
    <li><a href="#results">Results</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="nginx">
  NGINX
  <a class="anchor" href="#nginx">#</a>
</h1>
<p>In order to use NGINX as a reverse proxy for GoToSocial you&rsquo;ll need to have it installed on your server. If you intend for the NGINX instance to also handle TLS, you&rsquo;ll need to <a href="../../../advanced/certificates">provision TLS certificates</a> too.</p>
<p>NGINX is <a href="https://repology.org/project/nginx/versions">packaged for many distributions</a>. It&rsquo;s very likely you can install it with your distribution&rsquo;s package manager. You can also run NGINX using a container runtime with the <a href="https://hub.docker.com/_/nginx">official NGINX image</a> that&rsquo;s published to the Docker Hub.</p>
<p>In this guide we&rsquo;ll also show how to use certbot to provision the TLS certificates. It too is <a href="https://repology.org/project/certbot/versions">packaged in many distributions</a> but many distributions tend to ship fairly old versions of certbot. If you run into trouble it may be worth considering using the <a href="https://hub.docker.com/r/certbot/certbot">container image</a> instead.</p>
<h2 id="configure-gotosocial">
  Configure GoToSocial
  <a class="anchor" href="#configure-gotosocial">#</a>
</h2>
<p>If GoToSocial is already running, stop it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl stop gotosocial
</span></span></code></pre></div><p>Or if you don&rsquo;t have a systemd service just stop it manually.</p>
<p>Tweak your GoToSocial configuration like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">letsencrypt-enabled</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">port</span>: <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">bind-address</span>: <span style="color:#ae81ff">127.0.0.1</span>
</span></span></code></pre></div><p>The first setting disables the built-in provisioning of TLS certificates. Since NGINX will now be handling that traffic GoToSocial no longer needs to be bound to port 443, or any privileged port.</p>
<p>By setting the <code>bind-address</code> to <code>127.0.0.1</code> GoToSocial will no longer be accessible directly from the outside. If your NGINX and GoToSocial instance aren&rsquo;t running on the same server you&rsquo;ll need to bind to an IP address that lets your reverse proxy reach your GoToSocial instance. By binding to a private IP address you can be sure GoToSocial can&rsquo;t be accessed except through NGINX.</p>
<h2 id="set-up-nginx">
  Set up NGINX
  <a class="anchor" href="#set-up-nginx">#</a>
</h2>
<p>First we will set up NGINX to serve GoToSocial as unsecured http and then use Certbot to automatically upgrade it to serve https.</p>
<p>Please do not try to use it until that&rsquo;s done or you&rsquo;ll risk transmitting passwords over clear text, or breaking federation.</p>
<p>First we&rsquo;ll write a configuration for NGINX and put it in <code>/etc/nginx/sites-available</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mkdir -p /etc/nginx/sites-available
</span></span><span style="display:flex;"><span>sudoedit /etc/nginx/sites-available/yourgotosocial.url.conf
</span></span></code></pre></div><p>In the above commands, replace <code>yourgotosocial.url</code> with your actual GoToSocial host value. So if your <code>host</code> is set to <code>example.org</code>, then the file should be called <code>/etc/nginx/sites-available/example.org.conf</code></p>
<p>The file you&rsquo;re about to create should look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">listen</span> <span style="color:#e6db74">[::]:80</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">server_name</span> <span style="color:#e6db74">example.org</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># set to 127.0.0.1 instead of localhost to work around https://stackoverflow.com/a/52550758
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:8080</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Upgrade</span> $http_upgrade;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Connection</span> <span style="color:#e6db74">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $remote_addr;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> $scheme;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">client_max_body_size</span> <span style="color:#e6db74">40M</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Change <code>proxy_pass</code> to the ip and port that you&rsquo;re actually serving GoToSocial on (if it&rsquo;s not on <code>127.0.0.1:8080</code>), and change <code>server_name</code> to your own domain name.</p>
<p>If your domain name is <code>example.org</code> then <code>server_name example.org;</code> would be the correct value.</p>
<p>If you&rsquo;re running GoToSocial on another machine with the local ip of 192.168.178.69 and on port 8080 then <code>proxy_pass http://192.168.178.69:8080;</code> would be the correct value.</p>
<p><strong>Note</strong>: You can remove the line <code>listen [::]:80;</code> if your server is not ipv6 capable.</p>
<p><strong>Note</strong>: <code>proxy_set_header Host $host;</code> is essential. It guarantees that the proxy and GoToSocial use the same server name. If not, GoToSocial will build the wrong authentication headers, and all attempts at federation will be rejected with 401.</p>
<p><strong>Note</strong>: The <code>Connection</code> and <code>Upgrade</code> headers are used for WebSocket connections. See the <a href="../websocket">WebSocket docs</a>.</p>
<p><strong>Note</strong>: <code>client_max_body_size</code> is set to 40M in this example, which is the default max video upload size for GoToSocial. You can make this value larger or smaller if necessary. The nginx default is only 1M, which is rather too small.</p>
<p><strong>Note</strong>: To make <code>X-Forwarded-For</code> and rate limiting work, set the <code>trusted-proxies</code> configuration variable. See the <a href="../../../api/ratelimiting">rate limiting</a> and <a href="../../../configuration/general">general configuration</a> docs</p>
<p>Next we&rsquo;ll need to link the file we just created to the folder that nginx reads configurations for active sites from.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mkdir -p /etc/nginx/sites-enabled
</span></span><span style="display:flex;"><span>sudo ln -s /etc/nginx/sites-available/yourgotosocial.url.conf /etc/nginx/sites-enabled/
</span></span></code></pre></div><p>Again, replace <code>yourgotosocial.url</code> with your actual GoToSocial host value.</p>
<p>Now check for configuration errors.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nginx -t
</span></span></code></pre></div><p>If everything is fine you should get this as output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
</span></span><span style="display:flex;"><span>nginx: configuration file /etc/nginx/nginx.conf test is successful
</span></span></code></pre></div><p>Everything working? Great! Then restart nginx to load your new config file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl restart nginx
</span></span></code></pre></div><h2 id="set-up-tls">
  Set up TLS
  <a class="anchor" href="#set-up-tls">#</a>
</h2>
<blockquote class="book-hint info">
  <p><strong>Note</strong></p>
<p>We have additional documentation on how to <a href="../../../advanced/certificates">provision TLS certificates</a> that also provides links to additional content and tutorials for different distributions that may be good to review.</p>

</blockquote>

<p>You should now be able to run certbot and it will guide you through the steps required to enable https for your instance.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo certbot --nginx
</span></span></code></pre></div><p>After you do, it should have automatically edited your configuration file to enable https.</p>
<p>Reload NGINX one last time:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl restart nginx
</span></span></code></pre></div><p>Now start GoToSocial again:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl start gotosocial
</span></span></code></pre></div><h2 id="security-hardening">
  Security hardening
  <a class="anchor" href="#security-hardening">#</a>
</h2>
<p>If you want to harden up your NGINX deployment with advanced configuration options, there are many guides online for doing so (<a href="https://beaglesecurity.com/blog/article/nginx-server-security.html">for example</a>). Try to find one that&rsquo;s up to date. Mozilla also publishes best-practice SSL configuration <a href="https://ssl-config.mozilla.org/">here</a>.</p>
<h2 id="results">
  Results
  <a class="anchor" href="#results">#</a>
</h2>
<p>You should now be able to open the splash page for your instance in your web browser, and will see that it runs under https!</p>
<p>If you open the NGINX config again, you&rsquo;ll see that Certbot added some extra lines to it.</p>
<p>!!! note
This may look a bit different depending on the options you chose while setting up Certbot, and the NGINX version you&rsquo;re using.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">server_name</span> <span style="color:#e6db74">example.org</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># set to 127.0.0.1 instead of localhost to work around https://stackoverflow.com/a/52550758
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:8080</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Upgrade</span> $http_upgrade;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Connection</span> <span style="color:#e6db74">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $remote_addr;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> $scheme;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">client_max_body_size</span> <span style="color:#e6db74">40M</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">listen</span> <span style="color:#e6db74">[::]:443</span> <span style="color:#e6db74">ssl</span> <span style="color:#e6db74">ipv6only=on</span>; <span style="color:#75715e"># managed by Certbot
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">listen</span> <span style="color:#ae81ff">443</span> <span style="color:#e6db74">ssl</span>; <span style="color:#75715e"># managed by Certbot
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">ssl_certificate</span> <span style="color:#e6db74">/etc/letsencrypt/live/example.org/fullchain.pem</span>; <span style="color:#75715e"># managed by Certbot
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">ssl_certificate_key</span> <span style="color:#e6db74">/etc/letsencrypt/live/example.org/privkey.pem</span>; <span style="color:#75715e"># managed by Certbot
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">include</span> <span style="color:#e6db74">/etc/letsencrypt/options-ssl-nginx.conf</span>; <span style="color:#75715e"># managed by Certbot
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">ssl_dhparam</span> <span style="color:#e6db74">/etc/letsencrypt/ssl-dhparams.pem</span>; <span style="color:#75715e"># managed by Certbot
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">if</span> <span style="color:#e6db74">(</span>$host = <span style="color:#e6db74">example.org)</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">return</span> <span style="color:#ae81ff">301</span> <span style="color:#e6db74">https://</span>$host$request_uri;
</span></span><span style="display:flex;"><span>  } <span style="color:#75715e"># managed by Certbot
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">listen</span> <span style="color:#e6db74">[::]:80</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">server_name</span> <span style="color:#e6db74">example.org</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">return</span> <span style="color:#ae81ff">404</span>; <span style="color:#75715e"># managed by Certbot
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>A number of additional configurations for nginx, including static asset serving and caching, are documented in the <a href="../../../advanced">Advanced</a> section of our documentation.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#configure-gotosocial">Configure GoToSocial</a></li>
    <li><a href="#set-up-nginx">Set up NGINX</a></li>
    <li><a href="#set-up-tls">Set up TLS</a></li>
    <li><a href="#security-hardening">Security hardening</a></li>
    <li><a href="#results">Results</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












